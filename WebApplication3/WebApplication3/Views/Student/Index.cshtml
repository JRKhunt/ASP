@model List<WebApplication3.Models.Student>
@{
    ViewBag.Title = "Index";
}

<link href="https://stackpath.bootstrapcdn.com/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet" />
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/5.3.0/js/bootstrap.min.js"></script>

<style>
    .table-bordered {
        border: 2px solid #dee2e6;
    }

        .table-bordered th,
        .table-bordered td {
            border: 1px solid #dee2e6;
        }

    .table-hover tbody tr:hover {
        background-color: #f2f2f2;
    }

    .bg-gradient-custom {
        background: linear-gradient(45deg, #42a5f5, #478ed1);
    }

    .form-control-custom {
        background-color: #f1faff;
        border: 2px solid #42a5f5;
        border-radius: 8px;
    }

    .btn-custom {
        background-color: #42a5f5;
        color: white;
        border-radius: 20px;
        padding: 8px 20px;
        transition: background-color 0.3s ease;
    }

        .btn-custom:hover {
            background-color: #1e88e5;
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
        }

    .card {
        border: none;
        border-radius: 10px;
        box-shadow: 0px 8px 16px rgba(0, 0, 0, 0.1);
    }

    .table {
        margin-bottom: 2rem;
        box-shadow: 0px 8px 16px rgba(0, 0, 0, 0.05);
    }

    th {
        background-color: #42a5f5;
        color: white;
        text-align: center;
    }

    .text-end {
        text-align: right;
    }

    .form-horizontal {
        padding: 15px;
        background-color: #f9f9f9;
        border-radius: 10px;
        margin-bottom: 2rem;
    }

    .mb-3 {
        margin-bottom: 1.5rem;
    }

    .text-center {
        text-align: center;
    }
</style>

<div class="container mt-5">
    <div class="mb-3 text-end">
        <a href="@Url.Action("Registration", "Student")" class="btn btn-custom">Add New Student</a>
    </div>

    <h2 class="text-center mb-4">@ViewBag.Title</h2>

    <!-- Form for filtering students -->
    @using (Html.BeginForm("Index", "Student", FormMethod.Get, new { @class = "form-horizontal" }))
    {
        <div class="mb-4 row">
            <label for="nameFilter" class="col-sm-3 col-form-label">Filter by:</label>
            <div class="col-sm-9">
                <div class="form-check">
                    <input type="radio" id="filterByName" name="filterType" value="name" class="form-check-input" checked />
                    <label for="filterByName" class="form-check-label">Name (First or Last)</label>
                </div>
                <div class="form-check">
                    <input type="radio" id="filterByCity" name="filterType" value="city" class="form-check-input" />
                    <label for="filterByCity" class="form-check-label">City</label>
                </div>
            </div>
        </div>
        <div class="mb-4 row">
            <label for="filterValue" class="col-sm-3 col-form-label">Enter Value:</label>
            <div class="col-sm-9">
                <input type="text" id="filterValue" name="filterValue" class="form-control form-control-custom" placeholder="Enter Value" value="@Request.QueryString["filterValue"]" />
            </div>
        </div>
        <div class="text-center mb-4">
            <input type="submit" value="Search" class="btn btn-info btn-custom" />
        </div>
    }

    <!-- Form for deleting selected students -->
    @using (Html.BeginForm("DeleteSelected", "Student", FormMethod.Post, new { @class = "form-horizontal" }))
    {
        <table class="table table-bordered table-striped table-hover">
            <thead class="bg-gradient-custom text-white">
                <tr>
                    <th scope="col" class="text-center"><input type="checkbox" id="selectAll" /></th>
                    <th scope="col">ID</th>
                    <th scope="col">First Name</th>
                    <th scope="col">Last Name</th>
                    <th scope="col">City</th>
                    <th scope="col" colspan="2" class="text-center">Actions</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr class="table-light">
                        <td class="text-center"><input type="checkbox" name="selectedIds" value="@item.Id" /></td>
                        <td>@item.Id</td>
                        <td>@item.fname</td>
                        <td>@item.lname</td>
                        <td>@item.city</td> <!-- Display City value -->
                        <td class="text-center">
                            @Html.ActionLink("Edit", "Edit", new { id = item.Id }, new { @class = "btn btn-warning btn-sm" })
                        </td>
                        <td class="text-center">
                            @Html.ActionLink("Delete", "Delete", new { id = item.Id }, new { @class = "btn btn-danger btn-sm", onclick = "return confirm('Are you sure you want to delete this item?');" })
                        </td>
                    </tr>
                }
            </tbody>
        </table>
        <div class="text-center">
            <input type="submit" value="Delete Selected" class="btn btn-danger btn-custom" />
        </div>
    }
</div>
